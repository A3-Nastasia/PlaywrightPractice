# Playwright

## Установка
```
$ dotnet add package Microsoft.Playwright
```

Для использования тестов:
```
$ dotnet add package Microsoft.Playwright.NUnit
```

Чтобы использовать, например на Linux, надо установить глобальную переменную, чтобы команда распознавалась:
```
$ dotnet tool install --global Microsoft.Playwright.CLI

$ playwright install [browser_for_optional_install]
```

Отменить:
```
$ dotnet tool uninstall -g Microsoft.Playwright.CLI
```

Другой вариант:

Для использования `Playwright`, по идее, нужен `PowerShell`. Его файл можно найти в проекте по пути `./bin/Debug/net9.0/playwright.ps1`. Устанавливает поддержку браузеров для библиотеки.

`PowerShell` можно установить на `Linux`. Инструкцию можно найти на официальном сайте Microsoft.

Но с командами выше на Linux все работает прекрасно. Почему так происходит?

\
Playwright обеспечивает кросс-платформенную поддержку.

`playwright.ps1` - скриптовая обертка (вообще, похоже на `bash`, особенно комментарием).

Если посмотреть через терминал Linux (поиск этой команды в файле):
```
$ ls -l $(which pwsh)

или для конкретики

$ ls -l path $(which pwsh)

где path - путь, например, из playwright.ps1 комментария.
```
, то отобразится информация о файле, в котором находится `pwsh`.

Проще говоря, эта строка в файле `playwright.ps1` - **Shebang** - инструкция, которая говорит ОС о том, какой интерпретатор использовать.


### Отличия от Selenium
|Playwright|Selenium|
|-|-|
|Встроенная поддержка браузеров (Chromium, Firefox, WebKit) из "коробки"|Нужны отдельные драйвера, но поддерживает много браузеров|
|Сразу готов после установки (нужно будет выполнить несколько команд по настройке и установке)|Нужны драйверы|
|C#, JS, TS, Java, Python|Широкий спектр языков программирования|
|Быстрее|Медленнее|
|Классическая автоматизация браузеров|Перехват запросов, мокирование, несколько контекстов браузера, изоляция тестов|
|Есть встроенные эмуляторы для мобилок|Нужны сторонние инструменты|

### Что по практике

- Очень удобная документация в подсказках в `Visual Studio`:
    - Описание того, что делает.
    - Блок кода для примера (очень интересный формат, like it)
    ```cs
    // при выборе в быстром меню будет небольшое описание и пример блока кода
    // сам Devices нужен для использования эмуляции устройства 
    await playwright.Devices["Phone_model"]
    ```
- Немного непривычное использование `async` `await` исходя из документации, но это дело практики.

```
dotnet list package
```

|||
|-|-|
|Microsoft.Playwright|1.53.0|
|Microsoft.NET.Test.Sdk|17.14.1|
|NUnit3TestAdapter|5.0.0|
|NUnit|4.3.2|